<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>kNN-VC Demo</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 2em;
      background-color: #f9f9f9;
      color: #333;
    }
    h1, h2 {
      color: #2c3e50;
    }
    section {
      margin-bottom: 2em;
    }
    audio {
      display: block;
      margin-top: 0.5em;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1em;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 0.5em;
      text-align: center;
    }
    th {
      background-color: #ecf0f1;
    }
  </style>
</head>
<body>
  <h1>Audio Demo Page</h1>

  <section>
    <h2>Samples from Voice Conversion System</h2>
    <p>Source Samples are from Librispeech dev-clean dataset.</p>
    <audio controls>
      <source src="samples/original_audio/input_audio.wav" type="audio/wav">
      Your browser does not support the audio element.
    </audio>
    <!-- Add more audio samples as needed -->
  </section>

  <section>
    <h2>Comparison to other models with different chunk sizes.</h2>
    <p>HiFi-GAN V1 causal is checkpoint g_012400000.pt with zero padding.</p>
    <p>HiFi-GAN V1 causal ctx is checkpoint g_01800000.pt with retaining context.</p>
    <table>
      <thead>
        <tr>
          <th>Model</th>
          <th>9600</th>
          <th>4800</th>
          <th>3200</th>
          <th>1600</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>HiFi-GAN V1 orignal </td>
          <td><audio controls><source src="samples/hifigan_original/9600_orignal.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/hifigan_original/4800_orignal.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/hifigan_original/3200_orignal.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/hifigan_original/1600_orignal.wav" type="audio/wav"></audio></td>
        </tr>
        
        <tr>
          <td>HiFi-GAN V1 causal </td>
          <td><audio controls><source src="samples/hifigan_causal/9600_causal.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/hifigan_causal/4800_causal.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/hifigan_causal/3200_causal.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/hifigan_causal/1600_causal.wav" type="audio/wav"></audio></td>
        </tr>

        <tr>
          <td>HiFi-GAN V1 causal ctx </td>
          <td><audio controls><source src="samples/hifigan_causal_ctx/audio_9600.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/hifigan_causal_ctx/audio_4800.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/hifigan_causal_ctx/audio_3200.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/hifigan_causal_ctx/audio_1600.wav" type="audio/wav"></audio></td>
        </tr>

        <!-- Add more rows as needed -->
      </tbody>
    </table>
  </section>

    <section>
    <h2>Main results for the report!</h2>
    <p>All results has been done with the causal checkpoint provided by the main repo and the Notebook script in there.</p>
    <h2>WavLM chunk and HiFi-GAN full</h2>
    <p>Only a 0.1 sec chunk with no added context     
     <audio controls>
        <source src="samples/report_audio/wavlm_chunk/1600.wav" type="audio/wav">
        Your browser does not support the audio element.
      </audio>
    </p>
    <p>Only 0.3 sec chunk with no added context     
     <audio controls>
        <source src="samples/report_audio/wavlm_chunk/4800.wav" type="audio/wav">
        Your browser does not support the audio element.
      </audio>
    </p>

    <p>A chunk size of 0.1 sec with added previous context of 0.2 sec     
     <audio controls>
        <source src="samples/report_audio/wavlm_chunk/4800_context.wav" type="audio/wav">
        Your browser does not support the audio element.
      </audio>
    </p>

    <h2>WavLM full and HiFi-GAN chunk</h2>

    <p>Only a 0.1 sec chunk with no added context     
     <audio controls>
        <source src="samples/report_audio/wavlm_full/1600.wav" type="audio/wav">
        Your browser does not support the audio element.
      </audio>
    </p>
    <p>a 0.1 sec chunk with 0.2 second added previous context
     <audio controls>
        <source src="samples/report_audio/wavlm_full/1600_3200.wav" type="audio/wav">
        Your browser does not support the audio element.
      </audio>
    </p>

    <h2>WavLM chunk and HiFi-GAN chunk</h2>
    <p>We first test the system with only previous context. The total processed size is chunk(0.1 sec) + prev_context(0.1~0.4) with a max of 0.5 sec.</p>
    <table>
      <thead>
        <tr>
          <th>9600</th>
          <th>4800</th>
          <th>3200</th>
          <th>1600</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><audio controls><source src="samples/report_audio/full_prev/1600.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/report_audio/full_prev/3200.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/report_audio/full_prev/4800.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/report_audio/full_prev/9600.wav" type="audio/wav"></audio></td>
        </tr>
        <!-- Add more rows as needed -->
      </tbody>
    </table>
    <p>With a small lookahead of 320 samples the audio already improves.    
     <audio controls>
        <source src="samples/report_audio/full_prev_look/1600_320.wav" type="audio/wav">
        Your browser does not support the audio element.
      </audio>
    </p>

    <p> With added context of 0.1 sec on both sites the audio already sounds good but there are still click artifacts.
     <audio controls>
        <source src="samples/report_audio/full_prev_look/1600_eq.wav" type="audio/wav">
        Your browser does not support the audio element.
      </audio>
    </p>

    <p> These can be further mitigated with a chunk size of 1 sec for both context sites.
     <audio controls>
        <source src="samples/report_audio/limit/1_second_both.wav" type="audio/wav">
        Your browser does not support the audio element.
      </audio>
    </p>
  </section>



  <section>
    <h2>Jupyter Notebook results for context and Changepoint.</h2>
    <p> The Causal HiFiGan has been used for the whole test.</p>
    <p> The results are from the shared kaggle script with replaced WavLM,Knn and HiFiGan.</p>
    <table>
      <thead>
        <tr>
          <th>Model</th>
          <th>9600</th>
          <th>4800</th>
          <th>3200</th>
          <th>1600</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>No Context Baseline </td>
          <td><audio controls><source src="samples/original_notebook/9600.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/original_notebook/4800.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/original_notebook/3200.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/original_notebook/1600.wav" type="audio/wav"></audio></td>
        </tr>
        
        <tr>
          <td>Before HifiGan without Changepoint</td>
          <td><audio controls><source src="samples/Causal_before/Causal_without/9600.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/Causal_before/Causal_without/4800.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/Causal_before/Causal_without/3200.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/Causal_before/Causal_without/1600.wav" type="audio/wav"></audio></td>
        </tr>

        <tr>
          <td>Before HifiGan with Changepoint</td>
          <td><audio controls><source src="samples/Causal_before/Causal_change/9600.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/Causal_before/Causal_change/4800.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/Causal_before/Causal_change/3200.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/Causal_before/Causal_change/1600.wav" type="audio/wav"></audio></td>
        </tr>

        <tr>
          <td>After HifiGan without Changepoint</td>
          <td><audio controls><source src="samples/Causal_after/Causal_without/9600.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/Causal_after/Causal_without/4800.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/Causal_after/Causal_without/3200.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/Causal_after/Causal_without/1600.wav" type="audio/wav"></audio></td>
        </tr>

        <tr>
          <td>After HifiGan with Changepoint</td>
          <td><audio controls><source src="samples/Causal_after/Causal_change/9600.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/Causal_after/Causal_change/4800.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/Causal_after/Causal_change/3200.wav" type="audio/wav"></audio></td>
          <td><audio controls><source src="samples/Causal_after/Causal_change/1600.wav" type="audio/wav"></audio></td>
        </tr>

        <!-- Add more rows as needed -->
      </tbody>
    </table>
  </section>
  <!-- Add more sections for Ablations, Bonus Stuff, etc. -->

</body>
</html>
